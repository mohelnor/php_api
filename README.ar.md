## واجهة برمجة التطبيقات PHP: دليل الاستخدام وأمثلة المصادقة وعمليات CRUD

توفر هذه الواجهة مصادقة (باستخدام JWT) وعمليات CRUD لقاعدة بيانات MySQL. فيما يلي تعليمات الاستخدام وأمثلة لكل نقطة نهاية.

---

## المصادقة (Authentication)

### إنشاء حساب جديد (Signup)
**المسار:** `POST /auth/signup.php`

**المحتوى:**
```json
{
  "user": "اسم_المستخدم",
  "password": "كلمة_المرور"
}
```
**الاستجابة:**
```
{
  "error": 0,
  "msg": "تم إنشاء الحساب",
  "res": true
}
```

### تسجيل الدخول (Signin)
**المسار:** `POST /auth/signin.php`

**المحتوى:**
```json
{
  "user": "اسم_المستخدم",
  "password": "كلمة_المرور"
}
```
**الاستجابة:**
```
{
  "msg": 200,
  "token": "<JWT_TOKEN>",
  "res": { ...بيانات_المستخدم }
}
```

استخدم التوكن المرسل في الاستجابة في رأس الطلبات المحمية.

### مثال على نقطة محمية بالتوكن
**المسار:** `POST /auth/index.php`

**الرؤوس:**
```
Authorization: Bearer <JWT_TOKEN>
```
**المحتوى:**
```json
{
  "name": "اسم_المستخدم",
  "password": "كلمة_المرور"
}
```
**الاستجابة:**
```
{
  "msg": "تمت المصادقة",
  "user": { ... }
}
```

---

## عمليات CRUD

جميع النقاط تتوقع محتوى JSON. استبدل `<table>` باسم الجدول المناسب وعدل الحقول حسب الحاجة.

### الاستعلام (قراءة)
**المسار:** `POST /crud/select/index.php`

**المحتوى (حسب المعرف):**
```json
{
  "table": "users",
  "id": 1
}
```
**المحتوى (بشرط where):**
```json
{
  "table": "users",
  "where": "age > 18"
}
```
**الاستجابة:**
```
{
  "msg": "ok",
  "res": [ ... ]
}
```

### الإدخال (إنشاء)
**المسار:** `POST /crud/insert/index.php`

**المحتوى (صف واحد):**
```json
{
  "table": "users",
  "data": { "user": "john", "password": "pass" }
}
```
**المحتوى (عدة صفوف):**
```json
{
  "table": "users",
  "data": [ { "user": "john" }, { "user": "jane" } ]
}
```
**الاستجابة:**
```
{
  "msg": "ok",
  "insert_id": 2,
  "res": true
}
```

### التحديث
**المسار:** `POST /crud/update/index.php`

**المحتوى (حسب المعرف):**
```json
{
  "table": "users",
  "id": 1,
  "data": { "user": "اسم_جديد" }
}
```
**المحتوى (عدة صفوف):**
```json
{
  "table": "users",
  "data": [ { "id": 1, "user": "a" }, { "id": 2, "user": "b" } ]
}
```
**الاستجابة:**
```
{
  "msg": "ok",
  "res": true
}
```

### الحذف
**المسار:** `POST /crud/delete/index.php`

**المحتوى:**
```json
{
  "table": "users",
  "id": 1
}
```
**الاستجابة:**
```
{
  "msg": "ok",
  "deleted": true
}
```

### استعلام مخصص
**المسار:** `POST /crud/query/index.php`

**المحتوى:**
```json
{
  "query": "SELECT * FROM users WHERE age > 18"
}
```
**الاستجابة:**
```
{
  "msg": "ok",
  "res": [ ... ]
}
```

---

## ملاحظات
- جميع النقاط ترجع استجابة بصيغة JSON.
- للمصادقة، استخدم التوكن في رأس الطلب `Authorization` كالتالي: `Bearer <token>`.
- عدل أسماء الجداول والحقول حسب قاعدة بياناتك.

## صور
![](API_MOCK_TEST.png)
